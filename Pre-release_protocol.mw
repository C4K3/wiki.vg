This page documents the changes from the [[Protocol|last stable Minecraft release]] (currently 1.2.5) to the current pre-release (or weekly release).

== New packets ==

=== Tab-complete (0xCB) ===

''Two-way''

Sent C->S when the user presses [tab] while writing text. The payload contains all text behind the cursor.

The server responds with an auto-completion of the last word sent to it. In the case of regular chat, this is a player username. Command names and parameters are also supported.

In the event of more than one possible completion, the server responds with the options packed into the single string field, separated by a null character. Note that as strings are UTF-16, this is two bytes wide.

{| class="wikitable"
|- class="row0"
! class="col0" | Packet ID
! class="col1" | Field Name
! class="col2" | Field Type
! class="col3" | Example
! class="col4" | Notes
|- class="row1"
| class="col0 centeralign" | 0xCB
| class="col1 centeralign" | Text
| class="col2 centeralign" | string
| class="col3 centeralign" | 
| class="col4" | 
|- class="row3"
! class="col0" | Total Size:
| class="col1 rightalign" colspan="4" | 3 bytes + length of string
|}

=== Locale and View Distance (0xCC) ===

''Client to server''

Sent when the player connects, or when settings are changed.

{| class="wikitable"
|- class="row0"
! class="col0" | Packet ID
! class="col1" | Field Name
! class="col2" | Field Type
! class="col3" | Example
! class="col4" | Notes
|- class="row1"
| class="col0 centeralign" rowspan="3" | 0xCC
| class="col1 centeralign" | Locale
| class="col2 centeralign" | string
| class="col3 centeralign" | en_GB
|- class="row2"
| class="col1 centeralign" | View distance
| class="col2 centeralign" | int
| class="col3 centeralign" | 0
| class="col4" | 0-3 for 'far', 'normal', 'short', 'tiny'.
|- class="row3"
| class="col1 centeralign" | Chat info
| class="col2 centeralign" | byte
| class="col3 centeralign" | Bits: 0: chat enabled, 2: colors enabled
|- class="row4"
! class="col0" | Total Size:
| class="col1 rightalign" colspan="4" | 7 bytes + length of string
|}

=== Encryption Key Response (0xFC) ===

''Two-Way''

Sent by the client after receiving 0xFD. The server responds with 0xFC, too (but with an empty Shared key).

The shared key is a client-generated, 16 bytes long key for RC4 encryption. The key is encrypted with RSA with the public key from the Encryption Key Request packet.

{| class="wikitable"
|- class="row0"
! class="col0" | Packet ID
! class="col1" | Field Name
! class="col2" | Field Type
! class="col3" | Example
! class="col4" | Notes
|- class="row1"
| class="col0 centeralign" rowspan="2" | 0xFC
| class="col1 centeralign" | Shared key length
| class="col2 centeralign" | short
| class="col3 centeralign" | 
|- class="row2"
| class="col1 centeralign" | Shared key
| class="col2 centeralign" | byte array
| class="col3 centeralign" | 
|- class="row3"
! class="col0" | Total Size:
| class="col1 rightalign" colspan="4" | 3 bytes + length of key
|}

=== Encryption Key Request (0xFD) ===

''Server to client''

Sent after handshakes.

Public key encryption: RSA.

{| class="wikitable"
|- class="row0"
! class="col0" | Packet ID
! class="col1" | Field Name
! class="col2" | Field Type
! class="col3" | Example
! class="col4" | Notes
|- class="row1"
| class="col0 centeralign" rowspan="3" | 0xFD
| class="col1 centeralign" | Server id
| class="col2 centeralign" | string
|- class="row2"
| class="col1 centeralign" | Public key length
| class="col2 centeralign" | short
|- class="row3"
| class="col1 centeralign" | Public key
| class="col2 centeralign" | byte array
|- class="row4"
! class="col0" | Total Size:
| class="col1 rightalign" colspan="4" | 5 bytes + length of string + length of key
|}

== Changed packets ==

=== Login Request (0x01) ===

''Two-Way''

Just a guess: stripped unused string field.

'''Client to Server'''

{| class="wikitable"
|- class="row0"
! class="col0" | Packet ID
! class="col1" | Field Name
! class="col2" | Field Type
! class="col3" | Example
! class="col4" | Notes
|- class="row1"
| class="col0 centeralign" rowspan="7" | 0x01
| class="col1 centeralign" | Protocol Version
| class="col2 centeralign" | int
| class="col3 centeralign" | <code>20</code>
| class="col4" | <del>1.2.5's protocol version is <code>29</code></del> - since version 31 always 0
|- class="row2"
| class="col0 centeralign" | Username
| class="col1 centeralign" | string
| class="col2 centeralign" | <code>TkTech</code>
| class="col3" | <del>The name of the user attempting to login, max length of 16</del> - since version 31 empty string
|- class="row3"
| class="col0 centeralign" | Not used
| class="col1 centeralign" | int
| class="col2 centeralign" | <code>0</code>
| class="col3" | 
|- class="row4"
| class="col0 centeralign" | Not used
| class="col1 centeralign" | int
| class="col2 centeralign" | <code>0</code>
| class="col3" |
|- class="row5"
| class="col0 centeralign" | Not used
| class="col1 centeralign" | byte
| class="col2 centeralign" | <code>0</code>
| class="col3" |
|- class="row6"
| class="col0 centeralign" | Not used
| class="col1 centeralign" | unsigned byte
| class="col2 centeralign" | <code>0</code>
| class="col3" |
|- class="row7"
| class="col0 centeralign" | Not used
| class="col1 centeralign" | unsigned byte
| class="col2 centeralign" | <code>0</code>
| class="col3" |
|- class="row8"
! class="col0" | Total Size:
| class="col1 rightalign" colspan="4" | 20 bytes + length of strings
|}

'''Server to Client'''

{| class="wikitable"
|- class="row0"
! class="col0" | Packet ID
! class="col1" | Field Name
! class="col2" | Field Type
! class="col3" | Example
! class="col4" | Notes
|- class="row1"
| class="col0 centeralign" rowspan="7" | 0x01
| class="col1 centeralign" | Entity ID
| class="col2 centeralign" | int
| class="col3 centeralign" | <code>1298</code>
| class="col4" | The Players Entity ID
|- class="row2"
| class="col0 centeralign" | Level Type
| class="col1 centeralign" | string
| class="col2 centeralign" | default
| class="col3" | default or SUPERFLAT; level-type in server.properties
|- class="row3"
| class="col0 centeralign" | Server mode
| class="col1 centeralign" | int
| class="col2 centeralign" | <code>0</code>
| class="col3" | 0 for survival, 1 for creative
|- class="row4"
| class="col0 centeralign" | Dimension
| class="col1 centeralign" | int
| class="col2 centeralign" | <code>0</code>
| class="col3" | <code>-1</code>: The Nether, <code>0</code>: The Overworld, <code>1</code>: The End
|- class="row5"
| class="col0 centeralign" | Difficulty
| class="col1 centeralign" | byte
| class="col2 centeralign" | <code>1</code>
| class="col3" | <code>0</code> thru <code>3</code> for Peaceful, Easy, Normal, Hard
|- class="row6"
| class="col0 centeralign" | Not used
| class="col1 centeralign" | unsigned byte
| class="col2 centeralign" | <code>0</code>
| class="col3" | Only 0 observed from vanilla server, was previously world height
|- class="row7"
| class="col0 centeralign" | Max players
| class="col1 centeralign" | unsigned byte
| class="col2 centeralign" | <code>8</code>
| class="col3" | Used by the client to draw the player list
|- class="row8"
! class="col0" | Total Size:
| class="col1 rightalign" colspan="4" | 20 bytes + length of strings
|}

=== Hanshake (0x02) ===

''Client to server only'' - before encryption, not sure what happens thereafter, may still be a server reply --[[User:Ceiru|Ceiru]] 23:12, 27 April 2012 (MST)

{| class="wikitable"
|- class="row0"
! class="col0" | Packet ID
! class="col1" | Field Name
! class="col2" | Field Type
! class="col3" | Example
! class="col4" | Notes
|- class="row1"
| class="col0 centeralign" rowspan="2" | 0x02
| class="col1 centeralign" | Protocol Version
| class="col2 centeralign" | byte
| class="col3 centeralign" | <code>31</code>
| class="col4" | 
|- class="row2"
| class="col1 centeralign" | Username <del>and Host</del>
| class="col2 centeralign" | string
| class="col3 centeralign" | <code>TkTech</code>
| class="col4" | The username of the player attempting to connect<del>, and the host he is connecting to, seperated by a semicolon.</del>
|- class="row3"
! class="col0" | Total Size:
| class="col1 rightalign" colspan="4" | 4 bytes + length of string
|}

== Protocol History ==

=== 2012-04-26 ===
* 12w17a
* Protocol version is now 31
* RC4 based encryption, described in [[Protocol_Encryption]]
* Changed packet: 0x01 Login Request
* Changed packet: 0x02 Handshake
* Changed packet: 0xCC Locale and View Distance
* New packet: 0xFC Encryption Key Response
* New packet: 0xFD Encryption Key Request
* New Item: Book & Quills (0x182) is enchantable
* New Item: Written Book (0x183) is enchantable

=== 2012-04-19 ===
* 12w16a
* Protocol version is now 30
* New packet: 0xCB Tab-complete
* New packet: 0xCC Locale and View Distance
