People very, very often have questions regarding the Minecraft Modern [[Protocol]], so we'll try to address some of the most common ones on this document. If you're still having trouble, join us on IRC, channel [irc://irc.freenode.net/mcdevs #mcdevs on irc.freenode.net].

== Is the protocol documentation complete? ==

Depending on your definition, ''yes''! All packet types are known and their layout documented. Some finer details are missing, but everything you need to make functional programs is present. We also collect information on the [[pre-release protocol]] changes, allowing us to quickly document new releases.

== What's the normal login sequence for a client? ==

See [[Authentication]] for communication with Mojang's servers.

{{Warning|Information might not be totally up to date}} 

The recommended login sequence looks like this, where '''C''' is the client and '''S''' is the server:

# Client connects to server
# '''C→S''': [[Protocol#Handshake|Handshake]] State=2
# '''C→S''': [[Protocol#Login Start|Login Start]]
# '''S→C''': [[Protocol#Encryption Request|Encryption Request]]
# Client auth
# '''C→S''': [[Protocol#Encryption Response|Encryption Response]]
# Server auth, both enable encryption
# '''S→C''': [[Protocol#Login Success|Login Success]]
# '''S→C''': [[Protocol#Join Game|Join Game]]
# '''S→C''': [[Protocol#Plugin Message (clientbound) |Plugin Message]]: [[Plugin channel#MC.7CBrand|<code>MC|Brand</code>]] with the server's brand (Optional)
# '''S→C''': [[Protocol#Server Difficulty|Server Difficulty]] (Optional)
# '''S→C''': [[Protocol#Spawn Position|Spawn Position]] (“home” spawn, not where the client will spawn on login)
# '''S→C''': [[Protocol#Player Abilities (clientbound)|Player Abilities]]
# '''C→S''': [[Protocol#Plugin Message (serverbound)|Plugin Message]]: [[Plugin channel#MC.7CBrand|<code>MC|Brand</code>]] with the client's brand (Optional)
# '''C→S''': [[Protocol#Client Settings|Client Settings]]
# '''S→C''': [[Protocol#Player Position And Look (clientbound)|Player Position And Look]] (Required, tells the client they're ready to spawn)
# '''C→S''': [[Protocol#Teleport Confirm|Teleport Confirm]]
# '''C→S''': [[Protocol#Player Position And Look (serverbound)|Player Position And Look]] (to confirm the spawn position)
# '''C→S''': [[Protocol#Client Status|Client Status]] (sent either before or while receiving chunks, further testing needed, server handles correctly if not sent)
# '''S→C''': inventory, [[Protocol#Map Chunk Bulk|Map Chunk Bulk]], entities, etc

== I think I've done everything right, but… ==

=== …my player isn't spawning! ===

After sending the common-sense packets ([[Protocol#Handshake|Handshake]], [[Protocol#Login Start|Login Start]], [[Protocol#Window Items|inventory]], [[Protocol#Spawn Position|compass]], and [[Protocol#Chunk Data|chunks]]), you need to finally send the player their [[Protocol#Player Position And Look|initial position]] for them to leave the “Loading Map” screen.

''Note that if the following steps are taken, a Minecraft client will spawn the player:''

# Do Handshake (see [[Protocol Encryption]])
# Send [[Protocol#Spawn Position|Spawn Position]] packet
# Send [[Protocol#Player Position And Look|Player Position And Look]] packet

While the above steps are sufficient for Minecraft 1.4.5, it is good form to send packets that inform the client about the world around the player before allowing the player to spawn.

=== …my client isn't receiving complete map chunks! ===
''Main article: [[How to Write a Client]]''

The standard Minecraft server sends full chunks only when your client is sending player status update packets (any of [[Protocol#Player|Player (0x03)]] through [[Protocol#Player Position And Look|Player Position And Look (0x06)]]).

=== …all connecting clients spasm and jerk uncontrollably! ===

For newer clients, your server needs to send 49 chunks ahead of time, not just one. Send a 7×7 square of chunks, centered on the connecting client's position, ''before'' spawning them.

=== …the client is trying to send an invalid packet that beings with 0xFE01 ===

The client is attempting a [[Server_List_Ping#1.6|legacy ping]], this happens if your server did not respond to the [[Server List Ping]] properly, including if it sent malformed json.

[[Category:Protocol Details]]
[[Category:Minecraft Modern]]

== How do I open/save a command block? ==

The process to actually open the command block window clientside is somewhat complex; the client actually uses the [[Protocol#Update Block Entity|Update Block Entity (0x09)]] packet to open it.

First, the client must have at least an {{Minecraft Wiki|Server.properties#op-permission-level|OP permission level}} of 2, or else the client will refuse to open the command block.  (The op permission level is set with the [[Protocol#Entity Status|Entity Status]] packet)

To actually open the command block:

# '''C'''→'''S''': [[Protocol#Player Block Placement|Player Block Placement (0x1C)]], with the position being the command block that was right-clicked.
# '''S'''→'''C''': [[Protocol#Update Block Entity|Update Block Entity (0x09)]], with the NBT of the command block.

And to save it, use the [[Plugin channels#MC.7CAutoCmd|<code>MC|AutoCmd</code> plugin channel]].
